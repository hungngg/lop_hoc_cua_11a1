<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªá Th·ªëng H·ªçc T·∫≠p Future 2026</title>
    <style>
        :root {
            --bg: #0f172a; --glass: rgba(255, 255, 255, 0.1);
            --toan: linear-gradient(135deg, #ff0080, #7928ca);
            --ly: linear-gradient(135deg, #0070f3, #00dfd8);
            --hoa: linear-gradient(135deg, #f59e0b, #d97706);
            --sinh: linear-gradient(135deg, #10b981, #059669);
            --su: linear-gradient(135deg, #6366f1, #4f46e5);
            --anh: linear-gradient(135deg, #ec4899, #be185d);
            --van: linear-gradient(135deg, #8b5cf6, #7c3aed);
            --tin: linear-gradient(135deg, #06b6d4, #0891b2);
        }
        body { font-family: 'Inter', system-ui, sans-serif; background: var(--bg); color: white; margin: 0; overflow-x: hidden; }
        .hidden { display: none !important; }
        .background-blob { position: fixed; width: 500px; height: 500px; background: #3b82f6; filter: blur(150px); opacity: 0.15; z-index: -1; border-radius: 50%; top: -10%; right: -10%; }
        #auth-screen { height: 100vh; display: flex; justify-content: center; align-items: center; }
        .auth-box { background: var(--glass); backdrop-filter: blur(20px); padding: 40px; border-radius: 30px; border: 1px solid rgba(255,255,255,0.2); width: 350px; text-align: center; }
        input { width: 100%; padding: 15px; margin: 10px 0; border-radius: 15px; border: none; background: rgba(255,255,255,0.05); color: white; outline: none; transition: 0.3s; }
        header { padding: 20px 5%; display: flex; justify-content: space-between; align-items: center; background: rgba(0,0,0,0.2); }
        .btn { padding: 12px 25px; border-radius: 15px; border: none; cursor: pointer; font-weight: bold; color: white; transition: 0.3s; text-transform: uppercase; letter-spacing: 1px; }
        .container { max-width: 1200px; margin: 40px auto; padding: 0 20px; }
        .grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 25px; }
        .card { height: 180px; border-radius: 30px; display: flex; flex-direction: column; align-items: center; justify-content: center; font-size: 24px; font-weight: 800; cursor: pointer; transition: 0.4s; position: relative; overflow: hidden; }
        .card:hover { transform: translateY(-10px) rotate(2deg); }
        .sub-nav { display: flex; gap: 20px; justify-content: center; margin-bottom: 30px; }
        .sub-tab { flex: 1; padding: 25px; border-radius: 20px; text-align: center; background: var(--glass); cursor: pointer; font-size: 20px; font-weight: bold; border: 1px solid transparent; transition: 0.3s; }
        .sub-tab.active { border-color: #00dfd8; background: rgba(0, 223, 216, 0.1); }
        .item-box { background: var(--glass); padding: 20px; border-radius: 20px; display: flex; justify-content: space-between; align-items: center; border-left: 10px solid #fff; margin-bottom: 10px; }
        
       
        .comic-card { background: var(--glass); border-radius: 20px; overflow: hidden; cursor: pointer; transition: 0.3s; border: 1px solid rgba(255,255,255,0.1); }
        .comic-card:hover { transform: scale(1.05); border-color: #00dfd8; }
        .comic-thumb { width: 100%; height: 200px; object-fit: cover; }
        .comic-info { padding: 15px; text-align: center; font-weight: bold; }

        .admin-panel { background: rgba(255,255,255,0.03); border: 2px dashed #444; padding: 30px; border-radius: 30px; margin-bottom: 40px; }
        #viewer { position: fixed; inset: 0; background: rgba(0,0,0,0.95); z-index: 100; display: none; flex-direction: column; align-items: center; padding-top: 50px; }
        .view-content { width: 85%; height: 75%; border-radius: 20px; overflow: hidden; background: #000; position: relative; }
        video, iframe, img { width: 100%; height: 100%; border: none; }
     
        #comic-embed-area { width: 100%; height: 600px; margin-top: 30px; border-radius: 20px; overflow: hidden; display: none; }
    
        .video-card { 
            background: var(--glass); 
            border-radius: 20px; 
            overflow: hidden; 
            cursor: pointer; 
            transition: 0.3s; 
            border: 1px solid rgba(255,255,255,0.1); 
            display: flex;
            flex-direction: column;
        }
        .video-card:hover { 
            transform: scale(1.05); 
            border-color: #0070f3; 
            box-shadow: 0 10px 20px rgba(0,0,0,0.3);
        }
        .video-thumb { 
            width: 100%; 
            height: 180px; 
            object-fit: cover; 
            background: #000;
        }
        .video-info { 
            padding: 15px; 
            text-align: center; 
            font-weight: bold; 
            font-size: 16px;
        }
    
        #video-embed-area { 
            width: 100%; 
            height: 600px; 
            margin-top: 30px; 
            border-radius: 25px; 
            overflow: hidden; 
            display: none; 
            background: #000;
            border: 2px solid rgba(0, 112, 243, 0.3);
        }
        /* Hi·ªáu ·ª©ng M√†n h√¨nh ch√†o */
#splash-screen {
    position: fixed;
    inset: 0;
    background: #0f172a;
    z-index: 9999;
    display: flex;
    justify-content: center;
    align-items: center;
    transition: opacity 1s ease, visibility 1s;
}

.splash-content {
    text-align: center;
}

.splash-logo {
    font-size: 4rem;
    font-weight: 900;
    background: linear-gradient(135deg, #ff0080, #7928ca, #0070f3);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    animation: pulseGlow 2s infinite alternate;
    letter-spacing: 5px;
}

.splash-loader {
    width: 200px;
    height: 2px;
    background: rgba(255,255,255,0.1);
    margin: 20px auto;
    position: relative;
    overflow: hidden;
    border-radius: 10px;
}

.splash-loader::after {
    content: '';
    position: absolute;
    left: -50%;
    width: 50%;
    height: 100%;
    background: #00dfd8;
    animation: loading 1.5s infinite;
}

@keyframes pulseGlow {
    from { filter: drop-shadow(0 0 10px rgba(255,0,128,0.5)); transform: scale(1); }
    to { filter: drop-shadow(0 0 30px rgba(0,112,243,0.8)); transform: scale(1.05); }
}

@keyframes loading {
    100% { left: 100%; }
}

/* Hi·ªáu ·ª©ng xu·∫•t hi·ªán cho c√°c ph·∫ßn t·ª≠ ch√≠nh */
.fade-in {
    animation: fadeIn 1s ease forwards;
}

@keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
}

/* L√†m cho c√°c card xu·∫•t hi·ªán l·∫ßn l∆∞·ª£t */
.grid .card {
    opacity: 0;
    animation: fadeIn 0.5s ease forwards;
}
.grid .card:nth-child(1) { animation-delay: 0.1s; }
.grid .card:nth-child(2) { animation-delay: 0.2s; }
.grid .card:nth-child(3) { animation-delay: 0.3s; }
.grid .card:nth-child(4) { animation-delay: 0.4s; }
.grid .card:nth-child(5) { animation-delay: 0.5s; }
.grid .card:nth-child(6) { animation-delay: 0.6s; }
.grid .card:nth-child(7) { animation-delay: 0.7s; }
.grid .card:nth-child(8) { animation-delay: 0.8s; }
/* Hi·ªáu ·ª©ng cho th√¥ng b√°o c·∫£m ∆°n */
#thank-you-modal {
    position: fixed;
    inset: 0;
    background: rgba(15, 23, 42, 0.9);
    z-index: 10000;
    display: none;
    justify-content: center;
    align-items: center;
    backdrop-filter: blur(10px);
}

.thank-you-box {
    background: var(--glass);
    padding: 40px;
    border-radius: 30px;
    border: 1px solid rgba(0, 223, 216, 0.5);
    text-align: center;
    max-width: 400px;
    box-shadow: 0 0 30px rgba(0, 223, 216, 0.2);
    animation: fadeIn 0.5s ease;
}

.thank-you-box h2 {
    background: var(--ly);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    font-size: 2rem;
    margin-bottom: 15px;
}

.thank-you-box p {
    line-height: 1.6;
    color: #e2e8f0;
    margin-bottom: 25px;
}
    </style>
</head>
<body>
    <div id="splash-screen">
    <div class="splash-content">
        <div class="splash-logo">S-EDUCATION</div>
        <div class="splash-loader"></div>
        <p>Ki·∫øn t·∫°o t∆∞∆°ng lai 2026</p>
    </div>
</div>
    <div class="background-blob"></div>

    <div id="auth-screen">
        <div class="auth-box">
            <h1 style="margin-bottom: 30px; background: var(--toan); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">S-EDUCATION</h1>
            <div id="auth-inputs">
                <input type="text" id="l-user" placeholder="T√†i kho·∫£n">
                <input type="password" id="l-pass" placeholder="M·∫≠t kh·∫©u">
                <button id="auth-btn" class="btn" style="background: var(--toan); width: 100%; margin-top: 20px;" onclick="login()">B·∫ÆT ƒê·∫¶U H·ªåC</button>
                <p id="toggle-link" style="margin-top:15px; font-size:14px">Ch∆∞a c√≥ t√†i kho·∫£n? <a href="#" onclick="toggleAuth(true)" style="color:#ff0080">ƒêƒÉng k√Ω ngay</a></p>
            </div>
        </div>
    </div>

    <div id="main-app" class="hidden">
        <header>
            <div id="user-display" style="font-weight: bold;"></div>
            <button class="btn" style="background: #ef4444;" onclick="location.reload()">ƒêƒÉng xu·∫•t</button>
        </header>

        <div class="container">
            <div id="subject-screen">
                <h2 style="text-align: center; margin-bottom: 40px; font-size: 2.5rem;">CH·ªåN M√îN H·ªåC</h2>
                <div class="grid">
                    <div class="card" style="background: var(--toan)" onclick="enterSub('To√°n H·ªçc')">To√°n H·ªçc</div>
                    <div class="card" style="background: var(--ly)" onclick="enterSub('V·∫≠t L√Ω')">V·∫≠t L√Ω</div>
                    <div class="card" style="background: var(--hoa)" onclick="enterSub('H√≥a H·ªçc')">H√≥a H·ªçc</div>
                    <div class="card" style="background: var(--sinh)" onclick="enterSub('Sinh H·ªçc')">Sinh H·ªçc</div>
                    <div class="card" style="background: var(--su)" onclick="enterSub('L·ªãch S·ª≠')">L·ªãch S·ª≠</div>
                    <div class="card" style="background: var(--anh)" onclick="enterSub('Ti·∫øng Anh')">Ti·∫øng Anh</div>
                    <div class="card" style="background: var(--van)" onclick="enterSub('Ng·ªØ VƒÉn')">Ng·ªØ VƒÉn</div>
                    <div class="card" style="background: var(--tin)" onclick="enterSub('Tin H·ªçc')">Tin H·ªçc</div>
                </div>
            </div>

            <div id="detail-screen" class="hidden">
                <button class="btn" style="background: #475569; margin-bottom: 30px;" onclick="goHome()">‚Üê Quay l·∫°i</button>
                <h1 id="cur-sub-name" style="text-align: center; font-size: 3rem; margin-top: 0;"></h1>
                
                <div class="sub-nav">
                    <div id="tab-video" class="sub-tab active" onclick="switchMode('video')">üé¨ KHO VIDEO</div>
                    <div id="tab-comic" class="sub-tab" onclick="switchMode('comic')">üìñ TRUY·ªÜN & T√ÄI LI·ªÜU</div>
                </div>

                <div id="admin-area" class="admin-panel hidden">
                    <input type="text" id="add-name" placeholder="T√™n b√†i h·ªçc / T·∫≠p truy·ªán">
                    <div style="display:flex; gap:10px;"><input type="file" id="add-file"><input type="text" id="add-link" placeholder="Ho·∫∑c link Youtube"></div>
                    <button class="btn" style="background: #10b981; width: 100%; margin-top: 15px;" onclick="saveItem()">L∆ØU V√ÄO H·ªÜ TH·ªêNG</button>
                </div>

                <div id="item-display" class="grid"></div>
                <div id="video-embed-area"></div>

                <div id="comic-embed-area"></div>
            </div>
        </div>
    </div>

    <div id="viewer" onclick="closeViewer()">
        <button class="btn" style="background: #ef4444; margin-bottom: 20px;">ƒê√ìNG TR√åNH XEM [X]</button>
        <div class="view-content" id="view-inside" onclick="event.stopPropagation()"></div>
    </div>
<div id="thank-you-modal">
    <div class="thank-you-box">
        <h2>TUY·ªÜT V·ªúI! üåü</h2>
        <p id="thank-you-msg">Ch√∫c m·ª´ng b·∫°n ƒë√£ ho√†n th√†nh n·ªôi dung n√†y. M·ªói trang s√°ch, m·ªói ph√∫t phim ƒë·ªÅu l√† m·ªôt b∆∞·ªõc ti·∫øn t·ªõi t∆∞∆°ng lai!</p>
        <button class="btn" style="background: var(--ly); width: 100%;" onclick="closeThankYou()">TI·∫æP T·ª§C H√ÄNH TR√åNH</button>
    </div>
</div>
    <script>
        const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyjKN1CzR8RImuL5BjNpc9kt2v3_cJGRRF21y0R9KkNsydqq_-2atx4Elnxxi2P5V-MPg/exec";

        const defaultComics = [
            { 
                sub: 'Sinh H·ªçc', //thay theo t√™n m√¥n
                name: 'H√†nh tr√¨nh c·ªßa n∆∞·ªõc v√† mu·ªëi kho√°ng', //t√™n hi·ªÉn th·ªã truy·ªán 
                path: 'https://heyzine.com/flip-book/23700947cb.html', //link truy·ªán
                thumb: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_EoWll5jq4zIcwRK5e-NgqGiOI6t1llOt7w&s', //link ·∫£nh b√¨a
                mode: 'comic'
            },
            { 
                sub: 'Sinh H·ªçc', //thay theo t√™n m√¥n
                name: 'H√†nh tr√¨nh c·ªßa n∆∞·ªõc v√† mu·ªëi kho√°ng', //t√™n hi·ªÉn th·ªã vd
                path: 'https://youtu.be/WRfB9Yyd9bU', //link vd
                thumb: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ_EoWll5jq4zIcwRK5e-NgqGiOI6t1llOt7w&s', //link ·∫£nh b√¨a
                mode: 'video'
            },
            { 
                sub: 'V·∫≠t L√Ω', 
                name: 'Gi·∫•c m∆° c·ªßa nh·ªØng tia s√°ng', 
                path: 'https://heyzine.com/flip-book/f4b1e0165a.html', 
                thumb: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRcCRvyNcO9548h6xjBHp8x2QHepqshuyhVAw&s',
                mode: 'comic'
            },
                 { 
                sub: 'Ng·ªØ VƒÉn', //thay theo t√™n m√¥n
                name: 'Nh·ªØng chuy·∫øn ƒëi xuy√™n trang gi·∫•y', //t√™n hi·ªÉn th·ªã truy·ªán 
                path: 'https://heyzine.com/flip-book/7a6a634826.html', //link truy·ªán
                thumb: 'https://hoctot.hocmai.vn/wp-content/uploads/2019/10/bi-kip-mon-ngu-van-1.jpg', //link ·∫£nh b√¨a
                mode: 'comic'
            },
                 { 
                sub: 'Tin H·ªçc', //thay theo t√™n m√¥n
                name: 'H√†nh tr√¨nh th·ª©c t·ªânh', //t√™n hi·ªÉn th·ªã truy·ªán 
                path: 'https://heyzine.com/flip-book/bb52fb5045.html', //link truy·ªán
                thumb: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRGFrRdDxML8rPhDK0cB-eOpuF0StXBOCzXug&s', //link ·∫£nh b√¨a
                mode: 'comic'
            },
               { 
                sub: 'V·∫≠t L√Ω', //thay theo t√™n m√¥n
                name: 'S√≥ng', //t√™n hi·ªÉn th·ªã vd
                path: 'https://youtu.be/85nsTli2Vos?si=dbAwAmoGS9iy0btF', //link vd
                thumb: 'https://blog.marathon.edu.vn/wp-content/uploads/2022/03/phan-loai-song-co.jpg', //link ·∫£nh b√¨a
                mode: 'video'
            },
                   { 
                sub: 'H√≥a H·ªçc', 
                name: 'M·ªôt c√∫ ch·∫°m h√≥a h·ªçc', 
                path: 'https://heyzine.com/admin/view?n=e5eff9a581f8563a518a439fd3b0651d1fcf97f1.pdf&adminKey=1efafaa6d407cec7320004f7350baf26', 
                thumb: 'https://png.pngtree.com/png-clipart/20190117/ourmid/pngtree-student-chemistry-class-experiment-test-tube-png-image_433993.jpg',
                mode: 'comic'
            },
                      { 
                sub: 'L·ªãch S·ª≠', 
                name: 'H√†nh tr√¨nh c·∫£i c√°ch & kh√°t v·ªçng h√πng c∆∞·ªùng', 
                path: 'https://heyzine.com/flip-book/a874e7185a.html', 
                thumb: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQ5oF-JQbUy81n7pDJIG29ZtMsCSSKkoawYnw&s',
                mode: 'comic'
            },
                      { 
                sub: 'Ti·∫øng Anh', 
                name: 'Kh√¥ng ·ªïn r·ªìi!!!', 
                path: 'https://online.flippingbook.com/view/151077261/', 
                thumb: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTrySXsVVfGvNmC1qeyVXEtY78VGZ4SxNyB3Q&s',
                mode: 'comic'
            },
                 { 
                sub: 'Ng·ªØ VƒÉn', //thay theo t√™n m√¥n
                name: 'V·ª£ nh·∫∑t', //t√™n hi·ªÉn th·ªã vd
                path: 'https://youtube.com/shorts/nHXcpx-dCwo?si=M-64avq7sYumpObZ', //link vd
                thumb: 'https://blog.marathon.edu.vn/wp-content/uploads/2022/03/phan-loai-song-co.jpg', //link ·∫£nh b√¨a
                mode: 'video'
            },
                   { 
                sub: 'To√°n H·ªçc', //thay theo t√™n m√¥n
                name: 'Gi√° tr·ªã c·ªßa tri th·ª©c', //t√™n hi·ªÉn th·ªã vd
                path: 'https://youtu.be/edDnQwCFlvg?si=Da3QNRV8OLpIbalj', //link vd
                thumb: 'https://blog.marathon.edu.vn/wp-content/uploads/2022/03/phan-loai-song-co.jpg', //link ·∫£nh b√¨a
                mode: 'video'
            },
               { 
                sub: 'Ti·∫øng Anh', 
                name: 'Ti·∫øng Anh', 
                path: 'https://youtu.be/7GKvzCKQ53I?si=XNjsyfJwVEWUn5jy', 
                thumb: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTrySXsVVfGvNmC1qeyVXEtY78VGZ4SxNyB3Q&s',
                mode: 'video'
            },
                      { 
                sub: 'To√°n H·ªçc', 
                name: 'C√¥ng sai c·ªßa ƒë·ªãnh m·ªánh', 
                path: 'https://heyzine.com/flip-book/ca9f75b3a9.html', 
                thumb: 'https://stockdep.net/files/images/38268813.jpg',
                mode: 'comic'
            }
            
        ];
            // X·ª≠ l√Ω m√†n h√¨nh ch√†o khi trang t·∫£i xong
window.addEventListener('load', () => {
    setTimeout(() => {
        const splash = document.getElementById('splash-screen');
        splash.style.opacity = '0';
        splash.style.visibility = 'hidden';
        
        // Th√™m class hi·ªáu ·ª©ng cho m√†n h√¨nh ƒëƒÉng nh·∫≠p
        document.querySelector('.auth-box').classList.add('fade-in');
    }, 2500); // Hi·ªÉn th·ªã m√†n h√¨nh ch√†o trong 2.5 gi√¢y
});

// Ch·ªânh s·ª≠a h√†m showApp ƒë·ªÉ th√™m hi·ªáu ·ª©ng m∆∞·ª£t m√† khi v√†o trang ch·ªß
const originalShowApp = showApp;
showApp = function(user) {
    originalShowApp(user);
    document.getElementById('subject-screen').classList.add('fade-in');
};
        let db = JSON.parse(localStorage.getItem('future_edu_db')) || [];
        let curUser = null;
        let curSub = ''; 
        let curMode = 'video';

        function toggleAuth(isReg) {
            const container = document.getElementById('auth-inputs');
            if(isReg) {
                container.innerHTML = `
                    <h1 style="background: var(--ly); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">ƒêƒÇNG K√ù M·ªöI</h1>
                    <input type="text" id="r-user" placeholder="T√™n t√†i kho·∫£n">
                    <input type="password" id="r-pass" placeholder="M·∫≠t kh·∫©u">
                    <button id="auth-btn" class="btn" style="background: var(--ly); width: 100%; margin-top: 20px;" onclick="handleRegister()">T·∫†O T√ÄI KHO·∫¢N</button>
                    <p style="margin-top:15px; font-size:14px">ƒê√£ c√≥ t√†i kho·∫£n? <a href="#" onclick="location.reload()" style="color:#00dfd8">ƒêƒÉng nh·∫≠p</a></p>
                `;
            }
        }

        async function handleRegister() {
            const u = document.getElementById('r-user').value.trim();
            const p = document.getElementById('r-pass').value.trim();
            if(!u || !p) return alert("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß!");
            const btn = document.getElementById('auth-btn');
            btn.innerText = "ƒêANG X·ª¨ L√ù...";
            btn.disabled = true;
            try {
                const response = await fetch(SCRIPT_URL, {
                    method: "POST",
                    body: JSON.stringify({ action: "register", u, p }),
                    redirect: "follow"
                });
                const result = await response.text();
                if (result.includes("exists")) { alert("T√†i kho·∫£n ƒë√£ t·ªìn t·∫°i"); } 
                else { alert("ƒêƒÉng k√Ω th√†nh c√¥ng!"); location.reload(); }
            } catch (err) { alert("Th√¥ng b√°o: ƒêang ƒë·ªìng b·ªô..."); location.reload(); }
        }

        async function login() {
            const u = document.getElementById('l-user').value.trim();
            const p = document.getElementById('l-pass').value.trim();
            if(u === 'admin' && p === '123') return showApp({u: 'admin', role: 'admin'});
            const btn = document.getElementById('auth-btn');
            btn.innerText = "ƒêANG X√ÅC TH·ª∞C...";
            btn.disabled = true;
            try {
                const response = await fetch(SCRIPT_URL, {
                    method: "POST",
                    body: JSON.stringify({ action: "login", u, p }),
                    redirect: "follow"
                });
                const data = await response.json();
                if (data && data.u) { showApp(data); } 
                else { alert("Sai t√†i kho·∫£n!"); }
            } catch (err) { alert("L·ªói x√°c th·ª±c!"); } 
            finally { btn.disabled = false; btn.innerText = "B·∫ÆT ƒê·∫¶U H·ªåC"; }
        }

       function showApp(user) {
    curUser = user;
    document.getElementById('auth-screen').classList.add('hidden');
    document.getElementById('main-app').classList.remove('hidden');
    
    // Hi·ªÉn th·ªã t√™n ng∆∞·ªùi d√πng tr√™n header
    const userDisplayName = (user.role === 'admin' ? "üíé Admin: " : "üë§ H·ªçc vi√™n: ") + user.u;
    document.getElementById('user-display').innerText = userDisplayName;

    // Hi·ªÉn th·ªã khu v·ª±c qu·∫£n tr·ªã n·∫øu l√† Admin
    if(user.role === 'admin') document.getElementById('admin-area').classList.remove('hidden');

    // --- ƒêO·∫†N M√É TH√äM M·ªöI: L·ªúI CH√öC M·ªû ƒê·∫¶U ---
    const welcomeMsg = user.role === 'admin' 
        ? `Ch√†o m·ª´ng Qu·∫£n tr·ªã vi√™n <b>${user.u}</b> quay tr·ªü l·∫°i h·ªá th·ªëng!` 
        : `Ch√†o m·ª´ng <b>${user.u}</b>! Ch√∫c b·∫°n c√≥ m·ªôt bu·ªïi h·ªçc th·∫≠t hi·ªáu qu·∫£ t·∫°i S-EDUCATION.`;
    
    // S·ª≠ d·ª•ng l·∫°i Modal "Thank You" nh∆∞ng thay ƒë·ªïi n·ªôi dung ƒë·ªÉ l√†m l·ªùi ch√†o
    const thankBox = document.querySelector('.thank-you-box');
    const oldTitle = thankBox.querySelector('h2').innerText;
    const oldMsg = document.getElementById('thank-you-msg').innerHTML;
    const oldBtn = thankBox.querySelector('.btn').innerText;

    // ƒê·ªïi n·ªôi dung sang l·ªùi ch√†o
    thankBox.querySelector('h2').innerText = "XIN CH√ÄO! üëã";
    document.getElementById('thank-you-msg').innerHTML = welcomeMsg;
    thankBox.querySelector('.btn').innerText = "B·∫ÆT ƒê·∫¶U NGAY";

    // Hi·ªÉn th·ªã modal ch√†o m·ª´ng
    document.getElementById('thank-you-modal').style.display = 'flex';

    // Kh√¥i ph·ª•c l·∫°i n·ªôi dung g·ªëc c·ªßa modal sau khi ƒë√≥ng ƒë·ªÉ kh√¥ng ·∫£nh h∆∞·ªüng ƒë·∫øn t√≠nh nƒÉng "C·∫£m ∆°n" sau n√†y
    const btnAction = thankBox.querySelector('.btn');
    const originalClose = closeThankYou;
    
    closeThankYou = function() {
        document.getElementById('thank-you-modal').style.display = 'none';
        // Tr·∫£ l·∫°i n·ªôi dung c≈© cho modal
        thankBox.querySelector('h2').innerText = oldTitle;
        document.getElementById('thank-you-msg').innerHTML = oldMsg;
        thankBox.querySelector('.btn').innerText = oldBtn;
        // Reset h√†m v·ªÅ nguy√™n b·∫£n
        closeThankYou = originalClose;
    };
    setTimeout(closeThankYou, 3500); // T·ª± ƒë·ªông ƒë√≥ng l·ªùi ch√†o sau 3.5 gi√¢y
    // ------------------------------------------

    document.getElementById('subject-screen').classList.add('fade-in');
}

        function enterSub(name) {
            curSub = name;
            document.getElementById('subject-screen').classList.add('hidden');
            document.getElementById('detail-screen').classList.remove('hidden');
            document.getElementById('cur-sub-name').innerText = name;
            switchMode('video');
        }

        function goHome() {
            document.getElementById('subject-screen').classList.remove('hidden');
            document.getElementById('detail-screen').classList.add('hidden');
            document.getElementById('comic-embed-area').style.display = 'none'; // T·∫Øt khung truy·ªán
            document.getElementById('comic-embed-area').innerHTML = '';
        }

        function switchMode(mode) {
            curMode = mode;
            document.getElementById('tab-video').classList.toggle('active', mode === 'video');
            document.getElementById('tab-comic').classList.toggle('active', mode === 'comic');
            document.getElementById('comic-embed-area').style.display = 'none'; // ·∫®n khung truy·ªán khi ƒë·ªïi tab
            renderItems();
        }

        function saveItem() {
            if(curUser.role !== 'admin') return alert("Ch·ªâ Admin!");
            const name = document.getElementById('add-name').value;
            const file = document.getElementById('add-file').files[0];
            const link = document.getElementById('add-link').value;
            if(!name) return alert("Nh·∫≠p t√™n!");
            let path = file ? (curMode === 'video' ? 'video/' : 'truyen/') + file.name : link;
            db.push({ id: Date.now(), name, path, mode: curMode, sub: curSub });
            localStorage.setItem('future_edu_db', JSON.stringify(db));
            renderItems();
        }

        function renderItems() {
            const area = document.getElementById('item-display');
            area.innerHTML = "";
            
            const allData = [...defaultComics, ...db];
            const filtered = allData.filter(i => i.sub === curSub && i.mode === curMode);
            
            if (curMode === 'comic') {
                area.className = "grid"; 
                filtered.forEach(item => {
                    const thumb = item.thumb || 'https://img.freepik.com/free-vector/open-book-vector-clipart-design_53876-126231.jpg';
                    area.innerHTML += `
                        <div class="comic-card" onclick="openComicInline('${item.path}')">
                            <img src="${thumb}" class="comic-thumb">
                            <div class="comic-info">${item.name}</div>
                        </div>`;
                });
            } else {
                area.className = "";
                filtered.forEach(item => {
                    area.innerHTML += `
                        <div class="item-box" style="border-color: #0070f3">
                            <span><b>${item.name}</b></span>
                            <button class="btn btn-glow" style="background: var(--glass); border: 1px solid rgba(255,255,255,0.2)" onclick="view('${item.path}')">M·ªû XEM</button>
                        </div>`;
                });
            }
        }

        function openComicInline(path) {
            const embedArea = document.getElementById('comic-embed-area');
            embedArea.style.display = 'block';
            embedArea.innerHTML = `<iframe src="${path}" width="100%" height="100%" allowfullscreen></iframe>`;
            embedArea.scrollIntoView({ behavior: 'smooth' });
        }

        function view(path) {
            const modal = document.getElementById('viewer');
            const inside = document.getElementById('view-inside');
            modal.style.display = 'flex';
            if(path.includes('youtube.com') || path.includes('youtu.be')) {
                let id = path.includes('v=') ? path.split('v=')[1].split('&')[0] : path.split('/').pop();
                inside.innerHTML = `<iframe src="https://www.youtube.com/embed/${id}" allowfullscreen></iframe>`;
            } else {
                inside.innerHTML = `<iframe src="${path}" allowfullscreen></iframe>`;
            }
        }

       // H√†m hi·ªÉn th·ªã th√¥ng b√°o c·∫£m ∆°n
function showThankYou() {
    const modal = document.getElementById('thank-you-modal');
    modal.style.display = 'flex';
}

// H√†m ƒë√≥ng th√¥ng b√°o c·∫£m ∆°n
function closeThankYou() {
    document.getElementById('thank-you-modal').style.display = 'none';
}

// C·∫≠p nh·∫≠t h√†m ƒë√≥ng tr√¨nh xem video ƒë·ªÉ hi·ªán l·ªùi ch√∫c
function closeViewer() {
    document.getElementById('viewer').style.display = 'none';
    document.getElementById('view-inside').innerHTML = '';
    
    // ƒê·ª£i 0.5 gi√¢y sau khi ƒë√≥ng video th√¨ hi·ªán l·ªùi ch√∫c
    setTimeout(showThankYou, 500);
}

// N·∫øu b·∫°n mu·ªën hi·ªán l·ªùi ch√∫c khi ng∆∞·ªùi d√πng quay l·∫°i trang ch·ªß sau khi ƒë·ªçc truy·ªán
const originalGoHome = goHome;
goHome = function() {
    const isReading = document.getElementById('comic-embed-area').style.display === 'block';
    originalGoHome();
    if(isReading) {
        setTimeout(showThankYou, 500);
    }
};

        window.onkeydown = (e) => { if(e.key === "Escape") closeViewer(); };
    </script>
</body>
</html>
